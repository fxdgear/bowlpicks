// ********************************************************************************
//
//     FF Chartwell Web
//     Rings module
//
//     (c) 2012 FontShop International, http://fontfont.com
//
//     Commercial product, may not be redistributed.
//
// ********************************************************************************


var ringsCounterWidth=813;var ringsDiameter=713;var ringsMargin=10;supportedChartTypes.push("rings");log("Rings module loaded.");Chart.prototype.rings_normalizeValue=function(a){if(parseInt(a)){if(a<0){a=0}else if(a>100){a=100}}return a};Chart.prototype.rings_valueType=function(a){if(parseInt(a)||a==0){return"value"}else{return"grid"}};Chart.prototype.rings_chartWidth=function(){return Math.ceil(this.inScale(ringsCounterWidth+2*ringsMargin))};Chart.prototype.rings_chartHeight=function(){return Math.ceil(this.inScale(ringsDiameter+2*ringsMargin))};Chart.prototype.rings_draw=function(){log("Drawing canvas *"+this.ID+"* of type *"+this.type+"*");var a=Array(ringsCounterWidth/2+ringsMargin,ringsDiameter+ringsMargin);var b=Array(ringsCounterWidth/2+ringsMargin,ringsDiameter/2+ringsMargin);var c=ringsCounterWidth/2+ringsMargin;var d=ringsDiameter/2+ringsMargin;var e=ringsDiameter/2;if(this.values[0]&&(this.values[0].type == 'grid')){k=this.values[0];if(k.value=="a"){var f=20}else if(k.value=="b"){var f=10}else if(k.value=="c"){var f=5}else if(k.value=="d"){var f=4}else if(k.value=="e"){var f=2}this.canvasContext.lineWidth=this.inScale(6);this.canvasContext.strokeStyle=k.color.toHex();this.canvasContext.beginPath();this.canvasContext.moveTo(this.inScale(b[0]),this.inScaleY(b[1]));this.canvasContext.lineTo(this.inScale(a[0]),this.inScaleY(a[1]));this.canvasContext.stroke();for(g=1;g<f;g++){var h=RotatePointAroundPoint(b,a,g/f*360);this.canvasContext.beginPath();this.canvasContext.moveTo(this.inScale(b[0]),this.inScaleY(b[1]));this.canvasContext.lineTo(this.inScale(h[0]),this.inScaleY(h[1]));this.canvasContext.stroke()}}var i=0;for(var j=0;j<this.values.length;j++){var k=this.values[j];if(k.type=="value"&&i<10){if(k.value>0){this.canvasContext.beginPath();var e=(i+1)/10*ringsDiameter/2;var l=-.5;var m=-.5+k.value/100*2;var n=false;this.canvasContext.arc(this.inScale(c),this.inScaleY(d),this.inScale(e),l*Math.PI,m*Math.PI,n);this.canvasContext.lineWidth=this.inScale(12);this.canvasContext.strokeStyle=k.color.toHex();this.canvasContext.stroke()}i+=1}}}
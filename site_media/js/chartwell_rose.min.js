// ********************************************************************************
//
//     FF Chartwell Web
//     Rose module
//
//     (c) 2012 FontShop International, http://fontfont.com
//
//     Commercial product, may not be redistributed.
//
// ********************************************************************************


var roseCounterWidth=813;var roseDiameter=713;var roseMargin=10;supportedChartTypes.push("rose");log("Rose module loaded.");Chart.prototype.rose_normalizeValue=function(a){if(parseInt(a)){if(a<0){a=0}else if(a>100){a=100}}return a};Chart.prototype.rose_valueType=function(a){if(parseInt(a)||a==0){return"value"}else{return"grid"}};Chart.prototype.rose_chartWidth=function(){return Math.ceil(this.inScale(roseCounterWidth+2*roseMargin))};Chart.prototype.rose_chartHeight=function(){return Math.ceil(this.inScale(roseDiameter+2*roseMargin))};Chart.prototype.rose_draw=function(){log("Drawing canvas *"+this.ID+"* of type *"+this.type+"*");var a=Array(roseCounterWidth/2,roseDiameter);var b=Array(roseCounterWidth/2+roseMargin,roseDiameter/2+roseMargin);var c=roseCounterWidth/2+roseMargin;var d=roseDiameter/2+roseMargin;var e=roseDiameter/2;if(this.values[0].type=="grid"){j=this.values[0];if(j.value=="f"){this.canvasContext.beginPath();this.canvasContext.arc(this.inScale(c),this.inScaleY(d),this.inScale(e),0,2*Math.PI);this.canvasContext.fillStyle=j.color.toHex();this.canvasContext.fill()}else{if(j.value=="a"){var f=10}else if(j.value=="b"){var f=5}else if(j.value=="c"){var f=4}else if(j.value=="d"){var f=2}else if(j.value=="e"){var f=1}for(g=1;g<=f;g++){this.canvasContext.beginPath();this.canvasContext.arc(this.inScale(c),this.inScaleY(d),this.inScale(e/10*g*(10/f)),0,2*Math.PI);this.canvasContext.lineWidth=this.inScale(6);this.canvasContext.strokeStyle=j.color.toHex();this.canvasContext.stroke()}}}var h=0;for(var i=0;i<this.values.length;i++){var j=this.values[i];if(j.type=="value"){this.canvasContext.beginPath();this.canvasContext.moveTo(this.inScale(b[0]),this.inScaleY(b[1]));var e=roseDiameter/2*j.value/100;var k=-.5+h/this.amountOfValues()*2;var l=-.5+(h+1)/this.amountOfValues()*2;var m=false;this.canvasContext.arc(this.inScale(c),this.inScaleY(d),this.inScale(e),k*Math.PI,l*Math.PI,m);this.canvasContext.closePath();this.canvasContext.fillStyle=j.color.toHex();this.canvasContext.fill();h+=1}}}
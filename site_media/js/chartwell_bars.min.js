// ********************************************************************************
//
//     FF Chartwell Web
//     Bars module
//
//     (c) 2012 FontShop International, http://fontfont.com
//
//     Commercial product, may not be redistributed.
//
// ********************************************************************************


var barsWidth=9;var barsHeight=691;var barsDiamond=200;supportedChartTypes.push("bars");log("Bars module loaded.");Chart.prototype.bars_normalizeValue=function(a){if(a<0){a=0}else if(a>1e3){a=1e3}return a};Chart.prototype.bars_valueType=function(a){if(parseInt(a)||a==0){return"value"}else{return"diamond"}};Chart.prototype.bars_chartWidth=function(){var a=barsDiamond;for(var b=0;b<this.values.length;b++){if(this.values[b].type=="value"){a+=this.values[b].value*barsWidth}}if(this.text.endsWith("=")){a+=barsDiamond}return Math.ceil(this.inScale(a))};Chart.prototype.bars_chartHeight=function(){return Math.ceil(this.inScale(barsHeight))};Chart.prototype.bars_draw=function(){log("Drawing canvas *"+this.ID+"* of type *"+this.type+"*");for(var a=0;a<this.values.length;a++){value=this.values[a];if(value.type=="diamond"){this.canvasContext.beginPath();this.canvasContext.moveTo(this.inScaleOffset(barsDiamond),this.inScaleY(barsHeight));this.canvasContext.lineTo(this.inScaleOffset(0),this.inScaleY(barsHeight/2));this.canvasContext.lineTo(this.inScaleOffset(barsDiamond),this.inScaleY(0));this.canvasContext.lineTo(this.inScaleOffset(2*barsDiamond),this.inScaleY(barsHeight/2));this.canvasContext.closePath();this.canvasContext.fillStyle=value.color.toHex();this.canvasContext.fill()}else{this.canvasContext.beginPath();this.canvasContext.moveTo(this.inScaleOffset(barsDiamond),this.inScaleY(barsHeight));this.canvasContext.lineTo(this.inScaleOffset(0),this.inScaleY(barsHeight/2));this.canvasContext.lineTo(this.inScaleOffset(barsDiamond),this.inScaleY(0));this.canvasContext.lineTo(this.inScaleOffset(barsDiamond+value.value*barsWidth),this.inScaleY(0));this.canvasContext.lineTo(this.inScaleOffset(0+value.value*barsWidth),this.inScaleY(barsHeight/2));this.canvasContext.lineTo(this.inScaleOffset(barsDiamond+value.value*barsWidth),this.inScaleY(barsHeight));this.canvasContext.closePath();this.canvasContext.fillStyle=value.color.toHex();this.canvasContext.fill();this.xoffset+=value.value*barsWidth}}}